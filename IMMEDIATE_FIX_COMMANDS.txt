# ðŸ”§ IMMEDIATE FIX - COPY AND PASTE THESE COMMANDS IN YOUR GCP CLOUD SHELL

# Step 1: Build locally first (this is the key fix!)
pnpm install
pnpm run build

# Step 2: Create a simple Dockerfile that just serves pre-built files
cat > Dockerfile << 'DOCKERFILE'
FROM node:20-alpine
WORKDIR /app
RUN npm install -g serve
COPY dist ./dist
ENV PORT=5173
EXPOSE 5173
CMD ["serve", "-s", "dist", "-l", "5173"]
DOCKERFILE

# Step 3: Deploy with the fixed setup
gcloud run deploy solana-mev-bot \
    --source . \
    --region us-central1 \
    --allow-unauthenticated \
    --port 5173 \
    --memory 2Gi \
    --cpu 2 \
    --timeout 300

# That's it! Your deployment should succeed now!
