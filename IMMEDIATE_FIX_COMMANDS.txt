# ðŸ”§ IMMEDIATE FIX - COPY AND PASTE THESE COMMANDS IN YOUR GCP CLOUD SHELL

# Step 1: Build locally first (this is the key fix!)
pnpm install
pnpm run build

# Step 2: Ensure backend Dockerfile (Express) is used (no overwrite)
echo "Ensuring backend Dockerfile (Express) is used..."
grep -q "CMD \[\"node\", \"server.js\"\]" Dockerfile && echo "Backend Dockerfile detected" || echo "Using repository Dockerfile (expects server.js)"

# Step 3: Deploy with the fixed setup
gcloud run deploy solana-mev-bot \
    --source . \
    --region us-central1 \
    --allow-unauthenticated \
    --port 8080 \
    --memory 2Gi \
    --cpu 2 \
    --timeout 300

# That's it! Your deployment should succeed now!
